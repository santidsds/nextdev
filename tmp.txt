---
import Layout from "../layouts/Layout.astro";
import backBtn from "../assets/btn_back.svg?url"
import ham from "../assets/btn_ham.svg?url"
import ContactForm from "../components/ContactForm.astro";

---

<Layout title="Creacion de sitio web" >

	<div class="h-screen w-screen bg-secondary_bg bg-cover overflow-auto overflow-x-hidden scroll-container" >
        <div class="w-full flex justify-between px-[13em] py-[3em] fixed opacity-90 z-50">
            <button class=""><a class="p-3" href="/#services"><img src={backBtn} alt="Back to services"></a></button>
            <h1 id="sectionTitle" class="mt-3 drop-shadow-xl shadow-black text-center text-white font-bold text-xl">DISEÑO Y DESARROLLO WEB</h1>
            <button class="opacity-0"><img src={ham} alt="Menu"></button>
        </div>
        

        <div id="smoothContainer" class="flex justify-start items-start p-[8em] px-48 ">
            <div class=" h-[200vh] z-30 mt-12">
                <div class="scroller pt-[15em]">
                    <div id="firstScrolleable" class="font-black text-light_gray transition-all ease-in-out duration-700 snap-child">
                        <div class="text-white font-black tracking-widest text-3xl  ">
                            <h1 class="multicolor">DALE PRESTIGIO A TU MARCA</h1>
                        
                        </div>
                        <div class="opacity-80">
                            <p class="font-bold text-xl max-w-2xl mt-[1em] text-white ">¿Que da mas <span class="multicolor">confianza</span> que una web <span class="multicolor">profesional?</span></p>
                            <p class="font-bold text-xl max-w-2xl mt-[1em] text-white ">Nuestros sitios están diseñados completamente desde cero para reflejar <span class="multicolor">tu marca</span> y tu <span class="multicolor">visión.</span></p>
                        </div>
                    
                    </div> 
                    <div id="secondScrolleable" class="font-black text-light_gray mt-[22em] transition-all ease-in-out duration-700 snap-child ">
                        <div class="text-white font-black tracking-widest text-3xl  ">
                            <h1 class="multicolor">¿QUE NOS DESTACA?</h1>
                        
                        </div>
                        <div class="opacity-80">
                            <p class="font-semibold text-md max-w-2xl mt-[1em] text-white ">Nuestro principal enfoque está en darle profesionalidad a tu marca con una web de <span class="multicolor">altísima calidad, </span>las animaciones y transiciones elegantes son características claves en el <span class="multicolor">desarrollo web moderno</span>, así como la rápida carga del contenido y la seguridad. </p>
                            <p class="font-semibold text-md max-w-2xl mt-[1em] text-white ">Nuestros servicios ofrecen las últimas tecnologías y trends en diseño para que tu marca destaque del resto.</p>
                        </div>
                    
                    </div> 
                    <div id="thirdScrolleable" class="font-black text-light_gray mt-[22em] transition-all ease-in-out duration-700 snap-child">
                        <div class="text-white font-black tracking-widest text-3xl  ">
                            <h1 class="multicolor">PROTOTIPO DE DISEÑO SIN COSTO</h1>
                        
                        </div>
                        <div class="opacity-80">
                            <p class="font-bold text-xl max-w-2xl mt-[1em] text-white ">Obtene tu diseño sin costo alguno, si te gusta nos ponemos <span class="multicolor">manos a la obra.</span> </p>
                            <p class="font-bold text-xl max-w-2xl mt-[1em] text-white ">Todos tus pagos tienen la garantía y confianza que ofrece <span class="multicolor">MercadoPago</span> para que pagues sin preocupaciones. </p>
                        </div>
                    
                    </div> 
                    
                    
                        
                </div>
            </div>
            
            <div id="videoDiv" class="h-screen fixed right-0 mt-[-8em] transition-all ease-in-out duration-200">
                <div data-us-project="Sg8WpYHGFTowEnfHTQxl" style="width:1100px; height: 1100px"></div>
                 
                <!-- <video autoplay loop muted playsinline class=" w-[850px] opacity-100" src="/src/assets/video.webm" aria-label="Website development demonstration video"></video>
                <div class="h-[4px] w-[80px] bg-white rounded-lg mx-auto mt-4 duration-75 ease-in hover:w-[40px]"></div> -->
            </div>
        </div>
        
        
        <div class=" flex justify-between items-start pt-24 w-full z-30 snap-child h-[150vh]" data-sticky-zone>
            
            <div id="fourthScrolleable" class="sticky top-[45%] left-[10%]">
                <h1 class=" text-light_gray font-[700] text-4xl max-w-xl">
                    Obtene tu presupuesto<span class="text-white"> personalizado</span> y un prototipo de diseño <span class="text-white">sin costo</span>
                </h1>
            </div> 
            
            <div id="fifthScrolleable" class="sticky top-[5%] right-[5%] transition-all ease-in duration-100 delay-300">
                <ContactForm/>
            </div>  

            
        </div>
	</div>
</Layout>

<style>
    .scroll-container {
        scroll-snap-type: y proximity;
        overflow-y: scroll;
        height: 100vh;
        -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    }

    .snap-child {
        scroll-snap-align: center;
    }

    /* Smooth transitions for opacity and transform changes */
    #firstScrolleable,
    #secondScrolleable,
    #thirdScrolleable {
        transition: opacity 0.6s ease-in-out delay 2s ;
        will-change: opacity; /* Hint for browser optimization */
        opacity: 0;
    }

    #fifthScrolleable {
        transition: opacity 0.45s ease, transform 0.7s ease;
        will-change: opacity, transform;
        opacity: 0;
        transform: translate3d(110px, 0, 0); /* Start slightly off-screen */
    }

    #fifthScrolleable.is-visible {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }

    #sectionTitle {
        transition: opacity 0.5s ease-in-out, transform 0.4s ease-in-out;
        will-change: opacity, transform;
        opacity: 0;
        transform: translateY(-100px); /* Initial state - off screen to the right */
    }

    #sectionTitle.is-hidden {
        opacity: 0;
        transform: translateY(-80px);
    }

    #videoDiv {
        transition: opacity 0.2s ease-in;
        will-change: opacity;
    }

    #videoDiv.is-dimmed {
        opacity: 0;
    }

    #smoothContainer {
        scroll-behavior: smooth;
    }

    

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
        .scroll-container {
            scroll-behavior: auto;
        }
        
        #firstScrolleable,
        #secondScrolleable,
        #thirdScrolleable,
        #fourthScrolleable,
        #fifthScrolleable,
        #videoDiv {
            transition: none;
        }
    }
</style>


<script type="text/javascript">!function(){if(!window.UnicornStudio){window.UnicornStudio={isInitialized:!1};var i=document.createElement("script");i.src="https://cdn.jsdelivr.net/gh/hiunicornstudio/unicornstudio.js@v1.4.35/dist/unicornStudio.umd.js",i.onload=function(){window.UnicornStudio.isInitialized||(UnicornStudio.init(),window.UnicornStudio.isInitialized=!0)},(document.head || document.body).appendChild(i)}}();
</script>

<script>
window.addEventListener('DOMContentLoaded', function() {
    const firstScrolleable = document.getElementById('firstScrolleable');
    const secondScrolleable = document.getElementById('secondScrolleable');
    const thirdScrolleable = document.getElementById('thirdScrolleable');
    const fifthScrolleable = document.getElementById('fifthScrolleable');
    const sectionTitle = this.document.getElementById('sectionTitle')
    const video = document.getElementById('videoDiv');
    const scrollContainer = document.querySelector('.scroll-container');
    const stickyZone = document.querySelector('[data-sticky-zone]');

    // Early return if critical elements are missing
    if (!scrollContainer) {
        console.warn('Scroll container not found');
        return;
    }

    const fadingSections = [firstScrolleable, secondScrolleable, thirdScrolleable].filter(Boolean);

    if (fadingSections.length) {
        const fadeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const isVisible = entry.isIntersecting;
                entry.target.style.opacity = isVisible ? '1' : '0';

                if (entry.target === firstScrolleable && sectionTitle) {
                    sectionTitle.style.opacity = isVisible ? '1' : '0';
                    sectionTitle.style.transform = isVisible ? 'translateY(0)' : 'translateY(-100px)';
                }
            });
        }, {
            root: scrollContainer,
            threshold: 1,
            rootMargin: '-12% 0px -8% 0px'
        });

        fadingSections.forEach(section => fadeObserver.observe(section));
    }

    if (stickyZone && fifthScrolleable) {
        const stickyObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const isStickyVisible = entry.isIntersecting;

                fifthScrolleable.classList.toggle('is-visible', isStickyVisible);
                sectionTitle?.classList.toggle('is-hidden', isStickyVisible);
                video?.classList.toggle('is-dimmed', isStickyVisible);
            });
        }, {
            root: scrollContainer,
            threshold: 0.25,
            rootMargin: '-5% 0px -5% 0px'
        });

        stickyObserver.observe(stickyZone);
    }

    const removeCredit = () => {
  document.querySelectorAll('a[href="https://unicorn.studio?utm_source=public-url"]').forEach(el => el.remove());
    };

    removeCredit(); // in case it already exists

    const observer = new MutationObserver(() => removeCredit());
    observer.observe(document.body, { childList: true, subtree: true });
}); 


</script>
